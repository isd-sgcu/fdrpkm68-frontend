---
import BlurText from "@common/BlurText.astro";

import ButtonFd from "@/components/common/ButtonFd.astro";
import Layout from "@/layouts/firstdate/WithNavbar.astro";
---

<Layout>
  <div class="px-4">
    <div class="mt-5 flex w-full flex-col items-center justify-center">
      <BlurText
        textSize="text-xl"
        className="font-zen-dots text-white"
        blurClassName="text-[#FFE4E1] blur-[1.75px] translate-x-[2px] translate-y-[2px] font-zen-dots"
      >
        Welcome
      </BlurText>
      <BlurText
        textSize="text-3xl"
        className="font-zen-dots text-[#CB438B]"
        blurClassName="text-[#CB438B] blur-[3px] text-6xl translate-y-[2px] font-zen-dots"
      >
        CU109
      </BlurText>
    </div>
    <div>
      <BlurText
        textSize="text-lg"
        className="font-zen-dots text-white"
        blurClassName="text-black blur-xs translate-y-[3px] font-zen-dots"
      >
        Activities
      </BlurText>
      <div class="flex w-full items-center justify-center">
        <div class="my-3 flex w-4/5 flex-col gap-y-2">
          <ButtonFd
            variant="fill"
            color="white"
            href="/firstdate/events/firstdate/"
            class="w-full"
          >
            CU First Date
          </ButtonFd>
          <ButtonFd
            variant="fill"
            color="white"
            id="festival-button"
            href="/firstdate/events/cufest"
            class="w-full"
          >
            Festival
          </ButtonFd>
          <ButtonFd
            variant="fill"
            color="white"
            href="/firstdate/events/rpkm/"
            class="w-full"
          >
            รับเพื่อนก้าวใหม่
          </ButtonFd>
          <ButtonFd
            variant="fill"
            color="white"
            href="/firstdate/events/freshmen-night/"
            class="w-full"
          >
            Freshmen Night
          </ButtonFd>
        </div>
      </div>
    </div>
    <div class="pb-6">
      <BlurText
        textSize="text-lg"
        className="font-zen-dots text-white"
        blurClassName="text-black blur-xs translate-y-[3px] font-zen-dots"
      >
        More
      </BlurText>
      <div class="flex w-full justify-center">
        <div class="my-3 flex w-4/5 flex-col gap-y-2">
          <ButtonFd
            variant="fill"
            color="white"
            href="/firstdate/qrcode/"
            class="flex w-full items-center"
          >
            <div
              class="flex w-full flex-row items-center justify-center space-x-3"
            >
              <img src="/firstdate/home/qrcode.svg" />
              <p>QR CODE</p>
            </div>
          </ButtonFd>
          <ButtonFd
            variant="fill"
            color="white"
            target="_blank"
            href="https://linktr.ee/freshmenfestival_feedback"
            class="w-full"
          >
            ประเมินผล
          </ButtonFd>
          <div class="mt-2 flex flex-col gap-y-2">
            <div class="flex flex-row gap-x-2">
              <ButtonFd variant="fill" color="white" href="/firstdate/maps/">
                แผนที่
              </ButtonFd>
              <ButtonFd
                variant="fill"
                color="white"
                target="_blank"
                href="https://drive.google.com/drive/folders/1kG6EeVk5KbGxjZCcLOEaA93fQ2ppjXX0?usp=sharing"
              >
                E-book
              </ButtonFd>
            </div>
            <div class="flex flex-row gap-x-2">
              <ButtonFd
                variant="fill"
                color="white"
                href="/firstdate/calendar/"
              >
                ปฏิทิน
              </ButtonFd>
              <ButtonFd
                variant="fill"
                color="white"
                href="/firstdate/emergency/"
              >
                Emergency
              </ButtonFd>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const festivalButton = document.getElementById("festival-button");

    if (festivalButton) {
      festivalButton.addEventListener("click", function (e) {
        e.preventDefault();

        // Target date: July 18, 2025 at 19:00 (7:00 PM)
        const targetDate = new Date("2025-07-18T19:00:00+07:00");
        const currentDate = new Date();

        // Check if current time is on or after the target date
        if (currentDate >= targetDate) {
          window.location.href = "/fest";
        } else {
          window.location.href = "/firstdate/events/cufest";
        }
      });
    }
  });
</script>
