---
const { house = {} } = Astro.props;
const {
  thName,
  enName,
  image,
  thDescription,
  enDescription,
  instagramURL,
  size,
  amount,
  capacity
} = house;

const colors = [
  { size: "S", bgColor: "#0FF", textColor: "#000" },
  { size: "M", bgColor: "#FF1493", textColor: "#fff" },
  { size: "L", bgColor: "#FFB6C1", textColor: "#000" },
  { size: "XL", bgColor: "#D38DD8", textColor: "#000" },
  { size: "XXL", bgColor: "#2B2D42", textColor: "#fff" }
];

let colorData = colors.find((color) => color.size == size);
if (!colorData) {
  colorData = { size: "", bgColor: "#000", textColor: "#fff" };
}
---

<!-- House Popup Overlay -->
<div
  id="view-house-popup"
  class="fixed inset-0 z-50 bg-[rgba(0,0,0,0.7)] flex items-center justify-center transition-opacity duration-200 w-full hidden"
>
  <!-- House Popup Wrapper -->
  <div class="relative w-full max-w-md px-5">
    <!-- Pink trapezoids -->
    <div class="absolute left-5 top-1/2 -translate-y-1/2 w-full h-full bg-[#FF1493] z-10 trapezoid-l-1"></div>
    <div class="absolute right-5 top-1/2 -translate-y-1/2 w-full h-full bg-[#FF1493] z-10 trapezoid-r-1"></div>

    <!-- Border -->
    <div class="cut-houses-1 bg-[#8A2BE4] p-[1.5px] relative">
      <!-- Content -->
      <div
        class="relative cut-houses-1 bg-[#2B2D42BF] px-5 py-8 flex flex-col items-center min-h-[340px] h-fit"
        id="view-group-popup-content"
      >
        <!-- House Size -->
        <div
          class="rounded-full absolute left-10 text-xl font-bold -translate-y-1 w-[40px] px-3 py-1 aspect-square flex justify-center items-center"
          style={`background-color: ${colorData.bgColor}; color: ${colorData.textColor};`}
        >
          {size}
        </div>

        <!-- House Image -->
        <div class="flex flex-col gap-1 items-center">
          <div class="flex items-center text-sm gap-[1px]">
            <p class="text-white">
              <span style={`color: ${amount == capacity ? "#FF1493" : "#68A987"};`}>
                {amount}
              </span>/{capacity}
            </p>
            <img src="/images/rpkm/person-icon-white.svg" width="18" height="18" />
          </div>
          <img
            src={"/images/rpkm/houses/" + image}
            width="104"
            height="104"
            class="border border-white"
          />
        </div>

        <!-- House Toggle Language -->
        <div class="absolute right-10 flex justify-center -translate-y-1">
          <button
            id="lang-th"
            class="px-2 py-1 rounded-l-xl text-white bg-[#FF1493] font-semibold text-xs cursor-pointer"
            type="button"
          >
            TH
          </button>
          <button
            id="lang-en"
            class="px-2 py-1 rounded-r-xl text-black bg-white font-semibold text-xs cursor-pointer"
            type="button"
          >
            EN
          </button>
        </div>

        <!-- House Title -->
        <p id="house-title" class="text-2xl pt-2 text-white font-bold">{thName}</p>

        <!-- House Description -->
        <p id="house-description" class="text-xs pt-3 text-white max-w-[250px]">{thDescription}</p>

        <!-- House Giveaway Header -->
        <p class="text-xl pt-3 text-white font-bold">ฝากถึงน้องๆ</p>

        <!-- House Giveaway Description -->
        <p id="house-message" class="text-xs pt-3 text-white max-w-[250px]">{thDescription}</p>

        <!-- House Instagram -->
        <div class="flex gap-2 pt-7 items-center cursor-pointer">
          <img src="/images/rpkm/instagram-icon.svg" width="20" height="20" />
          <p id="house-instagram" class="text-white font-medium">{enName}</p>
        </div>

        <!-- House Buttons -->
        <div class="flex gap-5 pt-7">
          <div class="filter z-20">
            <button
              id="btn-cancel-house"
              class="cut-edge-all border-4 border-[#00FFFF] bg-transparent cursor-pointer"
              type="button"
              style="width: 130px; height: 48px;"
            >
              <p class="text-xl text-[#00FFFF] font-medium">ย้อนกลับ</p>
            </button>
          </div>
          <div class="filter drop-shadow-[0_0_6px_white] z-20">
            <button
              id="btn-add-house"
              class="cut-edge-all bg-[linear-gradient(90deg,_#00FFFF_0%,_#2B2D42_100%)] cursor-pointer"
              type="button"
              style="width: 130px; height: 48px;"
            >
              <p class="text-xl text-white font-medium">เพิ่มบ้านนี้</p>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>