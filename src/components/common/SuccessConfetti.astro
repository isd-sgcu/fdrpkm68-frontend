---
interface Props {
  eventName: string;
}

const { eventName } = Astro.props;
---

<div class="bg-white/10 backdrop-blur-sm rounded-lg p-6 text-center">
  <div class="text-6xl mb-4">üéâ</div>
  <h2 class="text-2xl font-bold text-green-400 mb-4">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
  <p class="text-white mb-6">
    ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô {eventName} ‡πÅ‡∏•‡πâ‡∏ß
  </p>
  <button 
    class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg transition-colors"
    onclick="window.location.href='/firstdate/home/'"
  >
    ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
  </button>
</div>

<script>
  import confetti from 'canvas-confetti';

  // Function to create custom confetti with background positioning
  function createConfetti() {
    // Create a canvas element and position it behind content
    const canvas = document.createElement('canvas');
    canvas.style.position = 'fixed';
    canvas.style.top = '0';
    canvas.style.left = '50%';
    canvas.style.transform = 'translateX(-50%)';
    canvas.style.width = '440px'; // Match your max-width
    canvas.style.maxWidth = '100vw'; // Responsive fallback
    canvas.style.height = '100vh';
    canvas.style.zIndex = '1'; // In front of background, behind content
    canvas.style.pointerEvents = 'none';
    document.body.appendChild(canvas);

    // Create confetti instance on our custom canvas
    const myConfetti = confetti.create(canvas, {
      resize: true,
      useWorker: true
    });

    const duration = 8000; // 8 seconds
    const end = Date.now() + duration;
    const colors = ['#f43f5e', '#10b981', '#3b82f6', '#8b5cf6', '#f59e0b', '#ef4444', '#06b6d4', '#84cc16'];

    // Function for continuous confetti
    const frame = () => {
      // Left side confetti
      myConfetti({
        particleCount: 7,
        angle: 60,
        spread: 55,
        origin: { x: 0, y: 0.6 },
        colors: colors,
        gravity: 0.8,
        drift: 1,
        scalar: 1.2
      });

      // Right side confetti  
      myConfetti({
        particleCount: 7,
        angle: 120,
        spread: 55,
        origin: { x: 1, y: 0.6 },
        colors: colors,
        gravity: 0.8,
        drift: -1,
        scalar: 1.2
      });

      // Center top confetti
      myConfetti({
        particleCount: 10,
        angle: 90,
        spread: 70,
        origin: { x: 0.5, y: 0.1 },
        colors: colors,
        gravity: 0.9,
        drift: 0,
        scalar: 1.1
      });

      if (Date.now() < end) {
        requestAnimationFrame(frame);
      }
    };

    frame();

    // Additional random bursts
    const interval = setInterval(() => {
      myConfetti({
        particleCount: 15,
        angle: Math.random() * 60 + 60, // 60-120 degrees
        spread: 60,
        origin: { 
          x: Math.random() * 0.6 + 0.2, // 0.2 to 0.8
          y: Math.random() * 0.3 + 0.1  // 0.1 to 0.4
        },
        colors: colors,
        gravity: 0.8,
        scalar: 1.0
      });
    }, 300);

    // Clear interval and remove canvas after duration
    setTimeout(() => {
      clearInterval(interval);
      // Clean up canvas after confetti is done
      setTimeout(() => {
        if (canvas && canvas.parentNode) {
          canvas.parentNode.removeChild(canvas);
        }
      }, 2000); // Wait 2 more seconds for particles to clear
    }, duration);
  }

  // Auto-start confetti when component loads
  createConfetti();
</script>